<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Поиск ipad</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <header>
        <nav>
            <ul>
                <li><a href="/index.html">Главная</a></li>
                <li><a href="/price.html">Цены</a></li>
                <li><a href="/sites.html">Сайты</a></li>
                <li><a href="/promo.html">Акции</a></li>
                <li><a href="/feedback.html">Предложения</a></li>
                <li><a href="/video.html">Видео</a></li>
            </ul>
        </nav>
    </header>

    <div class="note">
        Данный сайт может искать цены только на iPad
    </div>

    <div class="info-container">
        <input type="text" id="searchInput" placeholder="Введите модель...">
        <div class="suggestions" id="suggestions"></div>
        <div class="links" id="results"></div>
        <span id="infoQuestion">?</span>
        <div id="infoText">
            'iPad Air 5 (2022)',  <br>
            'iPad mini 6 (2021)', <br>
            'iPad mini 7 (2024)', <br>
            'iPad Pro 11 (2022)', <br>
            'iPad Pro 12,9" (2022)', <br>
            'iPad Pro 11 (2024)', <br>
            'iPad Pro 12,9" (2024)', <br>
            'iPad Air 11 (2022)', <br>
            'iPad Air 12,9" (2022)', <br>
            'iPad Air 11 (2024)', <br>
            'iPad Air 12,9" (2024)', <br>
            'iPad 10.9 (2022)' <br>
        </div>
    </div>

    <a href="/price.html">Цены на iPhone</a>
    <button id="searchButton">Найти</button>
    <div class="loading" id="loading" style="display: none;">Загрузка...</div>
    <div class="links" id="html-results"></div>

    <footer>
        © Milinov
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const input = document.getElementById('searchInput');
            const results = document.getElementById('html-results');
            const searchButton = document.getElementById('searchButton');
            const loading = document.getElementById('loading');
            const suggestions = document.getElementById('suggestions');
    
            const models = [
                'iPad Air 5 (2022)',
                'iPad mini 6 (2021)',
                'iPad mini 7 (2024)',
                'iPad Pro 11 (2022)',
                'iPad Pro 12,9" (2022)',
                'iPad Pro 11 (2024)',
                'iPad Pro 12,9" (2024)',
                'iPad Air 11 (2022)',
                'iPad Air 12,9" (2022)',
                'iPad Air 11 (2024)',
                'iPad Air 12,9" (2024)',
                'Apple iPad 10.9 (2022)'
            ];
    
            const memoryOptions = {
                'iPad Air 5 (2022)': ['64', '256'],
                'iPad mini 6 (2021)': ['64', '256'],
                'iPad mini 7 (2024)': ['128', '256', '512'],
                'iPad Pro 11 (2022)': ['256', '512','1tb', '128'],
                'iPad Pro 12,9" (2022)': ['256', '512','1tb', '128'],
                'iPad Pro 11 (2024)': ['256', '512','1tb', '2tb'],
                'iPad Pro 12,9" (2024)': ['256', '512','1tb', '2tb'],
                'iPad Air 11 (2022)': ['64', '128'],
                'iPad Air 12,9" (2022)': ['64', '128'],
                'iPad Air 11 (2024)': ['256', '512','1tb', '128'],
                'iPad Air 12,9" (2024)': ['256', '512','1tb', '128'],
                'iPad 10.9 (2022)': ['64', '256']
            };
    
            const clearSuggestions = () => {
                suggestions.innerHTML = '';
                suggestions.style.display = 'none';
            };
    
            const populateSuggestions = (query) => {
                clearSuggestions();
                if (!query) return;
    
                for (const model in memoryOptions) {
                    if (model.toLowerCase().includes(query)) {
                        const options = memoryOptions[model];
                        options.forEach(option => {
                            const optionDiv = document.createElement('div');
                            optionDiv.innerText = `${model} ${option}`;
                            optionDiv.tabIndex = 0; 
                            optionDiv.addEventListener('click', () => {
                                input.value = `${model} ${option}`;
                                clearSuggestions();
                            });
                            suggestions.appendChild(optionDiv);
                        });
                        suggestions.style.display = 'block';
                        break;
                    }
                }
            };
    
            input.addEventListener('input', () => {
                const query = input.value.toLowerCase().trim();
                populateSuggestions(query);
            });
    
            searchButton.addEventListener('click', () => {
                const query = input.value.toLowerCase().trim();
                results.innerHTML = '';
                loading.style.display = 'block';
    
                setTimeout(() => {
                    const matchedModel = Object.keys(memoryOptions).find(model =>
                        query.includes(model.toLowerCase())
                    );
    
                    if (matchedModel) {
                        const stores = [
                            { name: 'М.Видео', url: `https://www.mvideo.ru/product-list-page?q=${encodeURIComponent(query)}` },
                            { name: 'ДНС', url: `https://www.dns-shop.ru/search/?q=${encodeURIComponent(query)}` },
                            { name: 'Рестор', url: `https://re-store.ru/search/?q=${encodeURIComponent(query)}` },
                            { name: 'МТС', url: `https://shop.mts.ru/search/?TYPE=products&q=${encodeURIComponent(query)}` },
                            { name: 'Билайн', url: `https://moskva.beeline.ru/search/?term=${encodeURIComponent(query)}` },
                            { name: 'Мегафон', url: `https://moscow.shop.megafon.ru/search?qry=${encodeURIComponent(query)}` },
                            { name: 'Эльдорадо', url: `https://www.eldorado.ru/search/catalog.php?q=${encodeURIComponent(query)}` },
                            { name: 'Технопарк', url: `https://www.technopark.ru/search/?q=${encodeURIComponent(query)}` },
                        ];
    
                        stores.forEach(store => {
                            const a = document.createElement('a');
                            a.href = store.url;
                            a.target = "_blank";
                            a.className = 'store-button';
                            a.innerText = store.name;
                            results.appendChild(a);
                        });
    
                        searchButton.classList.add('success');
                        searchButton.classList.remove('error');
                    } else {
                        results.innerHTML = '<div> Модель не найдена. Пожалуйста, попробуйте другую.</div>';
                        searchButton.classList.add('error');
                        searchButton.classList.remove('success');
                    }
                    loading.style.display = 'none';
                }, 1000);
            });
    
            document.addEventListener('click', (e) => {
                if (!suggestions.contains(e.target) && e.target !== input) {
                    clearSuggestions();
                }
            });
        });

                infoQuestion.addEventListener('click', function () {
            if (infoText.style.display === 'block') {
                infoText.style.display = 'none'; 
            } else {
                infoText.style.display = 'block'; 
            }
        });

        infoQuestion.addEventListener('touchend', function () {
            if (infoText.style.display === 'block') {
                infoText.style.display = 'none'; 
            } else {
                infoText.style.display = 'block'; 
            }
        });
    </script>
    

</body>

</html>
